<app-navigation></app-navigation>

<div class="tournament-manage-container">

  <h1 class="title">
    {{ nomeDoTorneio }} — Gerenciamento da Partida
  </h1>

  <!-- Placar -->
  <div class="scoreboard">
    <div class="team-box blue">
      <h3>{{ time1Nome }}</h3>

      <div class="score-controls">
        <button (click)="alterarPlacar(1, -1)">-</button>
        <span class="score">{{ pontuacaoTime1 }}</span>
        <button (click)="alterarPlacar(1, 1)">+</button>
      </div>
    </div>

    <div class="team-box red">
      <h3>{{ time2Nome }}</h3>

      <div class="score-controls">
        <button (click)="alterarPlacar(2, -1)">-</button>
        <span class="score">{{ pontuacaoTime2 }}</span>
        <button (click)="alterarPlacar(2, 1)">+</button>
      </div>
    </div>
  </div>

  <!-- Listas laterais -->
  <div class="lists-wrapper">

    <!-- Time 1 -->
    <div class="players-list">
      <h2 class="blue">{{ time1Nome }}</h2>

      <div class="player-card" *ngFor="let p of jogadoresTime1">
        <span>{{ p.nickname }}</span>

        <div class="actions">
          <app-button
            label="Morto"
            icon="skull"
            iconPosition="left"
            size="small"
            [disabled]="p.morto"
            (click)="registrarMorte(p, 1)">
          </app-button>
        </div>
      </div>
    </div>

    <!-- Painel de eventos -->
    <div class="events-panel">
      <h2>EVENTOS DA PARTIDA</h2>

      <div class="event" *ngFor="let ev of eventos">
        <span>{{ ev.texto }}</span>
        <span class="time">{{ ev.hora }}</span>
      </div>
    </div>

    <!-- Time 2 -->
    <div class="players-list">
      <h2 class="red">{{ time2Nome }}</h2>

      <div class="player-card" *ngFor="let p of jogadoresTime2">
        <span>{{ p.nickname }}</span>

        <div class="actions">
          <app-button
            label="Morto"
            icon="skull"
            iconPosition="left"
            size="small"
            [disabled]="p.morto"
            (click)="registrarMorte(p, 2)">
          </app-button>
        </div>
      </div>
    </div>

  </div>

    <!-- Ações finais -->
  <div class="final-actions">
    <app-button
      label="Finalizar Partida"
      icon="done"
      color="primary"
      size="medium"
      class="finish-btn"
      (click)="finalizarPartida()">
    </app-button>

    <app-button
      label="Cancelar"
      icon="close"
      color="secundary"
      size="medium"
      class="cancel-btn"
      (click)="cancelarPartida()">
    </app-button>
  </div>


    <!-- MODAL VENCEDOR -->
  <div class="winner-modal" *ngIf="partidaFinalizada">
    <div class="modal-content">
      <h2>{{ vencedor }}</h2>

      <app-button
        label="OK"
        icon="check"
        color="primary"
        (click)="partidaFinalizada = false">
      </app-button>
    </div>
  </div>

    <!-- Modal de Cancelamento -->
  <div class="modal-overlay" *ngIf="mostrarModalCancelar">
    <div class="modal">
      <h2>Você deseja resetar ou cancelar o jogo?</h2>

      <div class="modal-buttons">
        <app-button
          label="Resetar"
          icon="restart_alt"
          color="accent"
          (click)="resetarPartida()">
        </app-button>

        <app-button
          label="Cancelar"
          icon="close"
          color="secundary"
          (click)="cancelarDeVez()">
        </app-button>
      </div>
    </div>
  </div>

</div>

<app-theme-toggler></app-theme-toggler>

